/*
jCountdown Plugin for jQuery JavaScript Library

v 1.1.1 02/12/2012

http://codecanyon.net/user/ufoufoufo

Copyright (c) 2012
*/

jQuery.fn.extend({jCountdown:function(){var t=function(t){this._target=t,this._width=50,this._height=64,this._frame=1,this._totalFrames=15,this._fps=24,this._intervalId=-1,this._value=0,this.stop=function(){clearInterval(this._intervalId)},this.update=function(t){if(t){this.frame(1),this.stop();var i=this;this._intervalId=setInterval(function(){i.frame()==i.totalFrames()?(clearInterval(i._intervalId),i.onFinish()):i.frame(i.frame()+1)},Math.ceil(1e3/this.fps()))}else this.frame(this.totalFrames())},this.value=function(t,i){return void 0==t?this._value:(this._value=t,void this.update(i))},this.onFinish=function(){},this.destroy=function(){this.stop(),this._target=null},this.width=function(t){return void 0==t?this._width:void(this._width=t)},this.height=function(t){return void 0==t?this._height:void(this._height=t)},this.frame=function(t){if(void 0==t)return this._frame;this._frame=t;var i=-(9-this.value())*this.width(),s=-(this.frame()-1)*this.height();this._target.children(".text").css("background-position",i+"px "+s+"px")},this.totalFrames=function(t){return void 0==t?this._totalFrames:void(this._totalFrames=t)},this.fps=function(t){return void 0==t?this._fps:void(this._fps=t)},this.update(!1)},i=function(t){this._target=t,this._width=50,this._height=64,this._frame=1,this._totalFrames=15,this._fps=24,this._intervalId=-1,this._value=0,this.stop=function(){clearInterval(this._intervalId)},this.update=function(t){if(t){this.frame(1),this.stop();var i=this;this._intervalId=setInterval(function(){i.frame()==i.totalFrames()?(clearInterval(i._intervalId),i.onFinish()):i.frame(i.frame()+1)},Math.ceil(1e3/this.fps()))}else this.frame(this.totalFrames())},this.value=function(t,i){return void 0==t?this._value:(this._value=t,void this.update(i))},this.onFinish=function(){},this.destroy=function(){this.stop(),this._target=null},this.width=function(t){return void 0==t?this._width:void(this._width=t)},this.height=function(t){return void 0==t?this._height:void(this._height=t)},this.frame=function(t){if(void 0==t)return this._frame;this._frame=t;var i=0,s=-((1+this.value())*this.height())+Math.sin((this.frame()-1)/(this.totalFrames()-1)*Math.PI/2)*this.height();this._target.children(".text").css("background-position",i+"px "+s+"px")},this.totalFrames=function(t){return void 0==t?this._totalFrames:void(this._totalFrames=t)},this.fps=function(t){return void 0==t?this._fps:void(this._fps=t)},this.update(!1)},s=function(t){this._target=t,this._width=60,this._height=60,this._frame=1,this._totalFrames=15,this._fps=24,this._intervalId=-1,this._value=0,this.stop=function(){clearInterval(this._intervalId)},this.update=function(t){if(t){this.frame(1),this.stop();var i=this;this._intervalId=setInterval(function(){i.frame()==i.totalFrames()?(clearInterval(i._intervalId),i.onFinish()):i.frame(i.frame()+1)},Math.ceil(1e3/this.fps()))}else this.frame(this.totalFrames())},this.value=function(t,i){return void 0==t?this._value:(this._value=t,void this.update(i))},this.onFinish=function(){},this.destroy=function(){this.stop(),this._target=null},this.width=function(t){return void 0==t?this._width:void(this._width=t)},this.height=function(t){return void 0==t?this._height:void(this._height=t)},this.frame=function(t){if(void 0==t)return this._frame;this._frame=t;var i=this.value()+1;i>9&&(i=0);var s,e=this.frame()/this.totalFrames();e>=.4&&.6>=e?s=0:.4>=e?s=1-e/.4:e>=.6&&(s=(e-.6)/.4);var h=0,a=-(e>.5?this.value():i)*this.height();a-=3*(1-s),this._target.children(".text").css("background-position",h+"px "+a+"px").css("opacity",s),this._target.children(".cover").css("opacity",s)},this.totalFrames=function(t){return void 0==t?this._totalFrames:void(this._totalFrames=t)},this.fps=function(t){return void 0==t?this._fps:void(this._fps=t)},this.update(!1)},e=function(t){this._target=t,this._width=60,this._height=60,this._widthSmall=42,this._heightSmall=42,this._frame=1,this._totalFrames=15,this._fps=24,this._intervalId=-1,this._value=0,this.stop=function(){clearInterval(this._intervalId)},this.update=function(t){if(t){this.frame(1),this.stop();var i=this;this._intervalId=setInterval(function(){i.frame()==i.totalFrames()?(clearInterval(i._intervalId),i.onFinish()):i.frame(i.frame()+1)},Math.ceil(1e3/this.fps()))}else this.frame(this.totalFrames())},this.value=function(t,i){return void 0==t?this._value:(this._value=t,void this.update(i))},this.onFinish=function(){},this.destroy=function(){this.stop(),this._target=null},this.width=function(t){return void 0==t?this._width:void(this._width=t)},this.height=function(t){return void 0==t?this._height:void(this._height=t)},this.frame=function(t){if(void 0==t)return this._frame;this._frame=t;var i=0,s=-this.value()*this.height(),e=Math.sin((this.frame()-1)/(this.totalFrames()-1)*Math.PI/2);e>0&&.001>e?e=0:0>e&&e>-.001&&(e=0),this._target.children(".text").css("background-position",i+"px "+s+"px").css("opacity",e)},this.totalFrames=function(t){return void 0==t?this._totalFrames:void(this._totalFrames=t)},this.fps=function(t){return void 0==t?this._fps:void(this._fps=t)},this.update(!1)},h=function(){this._days=[],this._hours=[],this._minutes=[],this._seconds=[],this._tickId=-1,this._tickDelay=100,this._timeText="",this._timeZone=0,this._time=null,this.checkTime=function(t){var i=new Date;if(this._time.getTime()<i.getTime()+60*i.getTimezoneOffset()*1e3){for(var s=0;s<this._days.length;s++)this._days[s].value(0);for(var s=0;s<this._hours.length;s++)this._hours[s].value(0);for(var s=0;s<this._minutes.length;s++)this._minutes[s].value(0);for(var s=0;s<this._seconds.length;s++)this._seconds[s].value(0);return this.stop(),this.onFinish(),!0}var e=this.timeFormat(this._time.getTime()-(i.getTime()+60*i.getTimezoneOffset()*1e3),this._days.length,this._hours.length,this._minutes.length,this._seconds.length),h=e.split("");if(!isNaN(this._time)){for(var s=0;s<this._days.length;s++){var a=parseInt(h.shift(),10);a!=this._days[s].value()&&this._days[s].value(a,t)}for(var s=0;s<this._hours.length;s++){var a=parseInt(h.shift(),10);a!=this._hours[s].value()&&this._hours[s].value(a,t)}for(var s=0;s<this._minutes.length;s++){var a=parseInt(h.shift(),10);a!=this._minutes[s].value()&&this._minutes[s].value(a,t)}for(var s=0;s<this._seconds.length;s++){var a=parseInt(h.shift(),10);a!=this._seconds[s].value()&&this._seconds[s].value(a,t)}}return!1},this.textFormat=function(t,i,s){for(t=t.toString();t.length<i;)t=s+t;return t.length>i&&(t=t.substr(t.length-i,i)),t},this.timeFormat=function(t,i,s,e,h){var a=Math.floor(t/1e3),r=a%60,n=Math.floor(a%3600/60),o=Math.floor(a%86400/3600),l=Math.floor(a/86400);return this.textFormat(l,i,"0")+this.textFormat(o,s,"0")+this.textFormat(n,e,"0")+this.textFormat(r,h,"0")},this.start=function(){this.stop();for(var t=0;t<this._days.length;t++)this._days[t].update();for(var t=0;t<this._hours.length;t++)this._hours[t].update();for(var t=0;t<this._minutes.length;t++)this._minutes[t].update();for(var t=0;t<this._seconds.length;t++)this._seconds[t].update();var i=this.checkTime(!1);if(!i){var s=this;this._tickId=setInterval(function(){s.checkTime(!0)},this._tickDelay)}},this.stop=function(){for(var t=0;t<this._days.length;t++)this._days[t].stop();for(var t=0;t<this._hours.length;t++)this._hours[t].stop();for(var t=0;t<this._minutes.length;t++)this._minutes[t].stop();for(var t=0;t<this._seconds.length;t++)this._seconds[t].stop();clearInterval(this._tickId)},this.onFinish=function(){},this.destroy=function(){for(var t=0;t<this._days.length;t++)this._days[t].destroy();for(var t=0;t<this._hours.length;t++)this._hours[t].destroy();for(var t=0;t<this._minutes.length;t++)this._minutes[t].destroy();for(var t=0;t<this._seconds.length;t++)this._seconds[t].destroy();this._days=[],this._hours=[],this._minutes=[],this._seconds=[],this.stop()},this.items=function(t,i,s,e){this._days=t,this._hours=i,this._minutes=s,this._seconds=e},this.timeText=function(t){return void 0==t?this._timeText:(this._timeText=t,void this.time(this.timeText(),this.timeZone()))},this.timeZone=function(t){return void 0==t?this._timeZone:(this._timeZone=t,void this.time(this.timeText(),this.timeZone()))},this.time=function(t,i){this._timeText=t,this._timeZone=i;var s=this._timeText.split("/").join(" ").split(":").join(" ").split(" "),e=parseInt(s[0],10),h=parseInt(s[1],10)-1,a=parseInt(s[2],10),r=parseInt(s[3],10),n=parseInt(s[4],10)-60*this._timeZone,o=parseInt(s[5],10);this._time=new Date(e,h,a,r,n,o,0),this.start()}},a=function(){return u.data("countdown")},r=function(){if(void 0==a()){var t=new h;return u.data("countdown",t),a()}},n=function(){void 0!=a()&&(a().destroy(),u.removeData("countdown"))},o=function(h){v=r();var a=parseInt(jQuery.browser.version,10),n="string"==typeof h.timeText?h.timeText:"",o=parseFloat(h.timeZone);isNaN(o)&&(o=0);var l="string"==typeof h.style?h.style.toLowerCase():"";switch(l){case"flip":break;case"slide":break;case"crystal":break;case"metal":break;default:l="flip"}var d="string"==typeof h.color?h.color.toLowerCase():"";switch(d){case"black":break;case"white":break;default:d="black"}var c=parseInt(h.width,10);c>=10||(c=0);var f=parseInt(h.textGroupSpace,10);f>=0||(f=15);var m=parseInt(h.textSpace,10);m>0||(m=0);var _=0!=h.reflection,p=parseFloat(h.reflectionOpacity);p>0?p>100&&(p=100):p=10;var g=parseInt(h.reflectionBlur,10);g>0?g>10&&(g=10):g=0;var y=parseInt(h.dayTextNumber,10)>2?parseInt(h.dayTextNumber,10):2,I=2,b=2,F=2,w=0!=h.displayDay,x=0!=h.displayHour,k=0!=h.displayMinute,T=0!=h.displaySecond,j=0!=h.displayLabel,M=void 0!=h.labelDay?h.labelDay:"",C=void 0!=h.labelHour?h.labelHour:"",O=void 0!=h.labelMinute?h.labelMinute:"",S=void 0!=h.labelSecond?h.labelSecond:"",Z="function"==typeof h.onFinish?h.onFinish:function(){},D="",N="",Q="";if(D+='<div class="jCountdown">',w){var z=x||k||T?"":" lastItem";D+='<div class="group day'+z+'">';for(var L=0;y>L;L++)N=" item"+(L+1),Q=L==y-1?" lastItem":"",D+='<div class="container'+N+Q+'">',("slide"==l||"crystal"==l||"metal"==l)&&(D+='<div class="cover"></div>'),D+='<div class="text"></div>',D+="</div>";j&&(D+='<div class="label"></div>'),D+="</div>"}if(x){var z=k||T?"":" lastItem";D+='<div class="group hour'+z+'">';for(var L=0;I>L;L++)N=" item"+(L+1),Q=L==I-1?" lastItem":"",D+='<div class="container'+N+Q+'">',("slide"==l||"crystal"==l||"metal"==l)&&(D+='<div class="cover"></div>'),D+='<div class="text"></div>',D+="</div>";j&&(D+='<div class="label"></div>'),D+="</div>"}if(k){var z=T?"":" lastItem";D+='<div class="group minute'+z+'">';for(var L=0;b>L;L++)N=" item"+(L+1),Q=L==b-1?" lastItem":"",D+='<div class="container'+N+Q+'">',("slide"==l||"crystal"==l||"metal"==l)&&(D+='<div class="cover"></div>'),D+='<div class="text"></div>',D+="</div>";j&&(D+='<div class="label"></div>'),D+="</div>"}if(T){D+='<div class="group second lastItem">';for(var L=0;F>L;L++)N=" item"+(L+1),Q=L==F-1?" lastItem":"",D+='<div class="container'+N+Q+'">',("slide"==l||"crystal"==l||"metal"==l)&&(D+='<div class="cover"></div>'),D+='<div class="text"></div>',D+="</div>";j&&(D+='<div class="label"></div>'),D+="</div>"}D+="</div>",u.html(D);var H=u.children(".jCountdown");H.addClass(l),H.addClass(d),H.children(".group").css("margin-right",f+"px"),H.children(".group.lastItem").css("margin-right","0px"),H.children(".group").children(".container").css("margin-right",m+"px"),H.children(".group").children(".container.lastItem").css("margin-right","0px"),H.children(".group.day").children(".label").html(M),H.children(".group.hour").children(".label").html(C),H.children(".group.minute").children(".label").html(O),H.children(".group.second").children(".label").html(S),_&&(jQuery.browser.msie&&10>a||(reflectionObject=H.clone(),reflectionObject.addClass("reflection"),j&&reflectionObject.addClass("displayLabel"),100!=p&&reflectionObject.css("opacity",p/100),0!=g&&reflectionObject.addClass("blur"+g),H=H.add(reflectionObject)));var P=jQuery('<div class="jCountdownContainer"></div>');if(P.append(H),u.append(P),0!=c){var B=jQuery('<div class="jCountdownScale"></div>');B.append(H),P.append(B);var G=B.width(),q=B.height(),A=c/G,E=-(1-A)*G/2,J=-(1-A)*q/2,K="scale("+A+")";P.width(G*A),P.height(q*A),jQuery.browser.msie&&8>=a?B.css("zoom",A):(B.css("transform",K).css("-moz-transform",K).css("-webkit-transform",K).css("-o-transform",K).css("-ms-transform",K),B.css("left",E).css("top",J))}var R="",U=0,V=[],W=[],X=[],Y=[],N=function(){};switch(l){case"flip":N=t;break;case"slide":N=i;break;case"crystal":N=e;break;case"metal":N=s}for(U=1,R=".group.day>.container.item";H.find(R+U).length;)V.push(new N(H.find(R+U))),U++;for(U=1,R=".group.hour>.container.item";H.find(R+U).length;)W.push(new N(H.find(R+U))),U++;for(U=1,R=".group.minute>.container.item";H.find(R+U).length;)X.push(new N(H.find(R+U))),U++;for(U=1,R=".group.second>.container.item";H.find(R+U).length;)Y.push(new N(H.find(R+U))),U++;v.items(V,W,X,Y),v.onFinish=Z,v.time(n,o)},l=function(){n(),u.children().remove()},d=function(){v.start()},c=function(){v.stop()};if(arguments.length>0){var u=this,v=a();if(1==arguments.length&&"object"==typeof arguments[0])void 0!=v&&l(),o(arguments[0]);else if("string"==typeof arguments[0]&&void 0!=v)switch(arguments[0]){case"stop":c();break;case"start":d();break;case"destroy":l()}}return this}});